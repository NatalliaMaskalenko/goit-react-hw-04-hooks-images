(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{30:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(8),r=n.n(o),s=(n(28),n(29),n(30),n(4)),i=n(0);function u(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],r=c[1];return Object(i.jsx)("header",{className:"Searchbar",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o.trim()?t(o):window.alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441")},className:"SearchForm",children:[Object(i.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(i.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(i.jsx)("input",{value:o,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"search",onChange:function(e){r(e.currentTarget.value.toLowerCase())}})]})})}var l=n(12),h=n(21),m=n.n(h),j=n(22),b=n(23),g=n(11),d=n.n(g);function f(e){var t=e.getBigPhoto,n=e.photo,a=e.alt,c=e.photoLage;return Object(i.jsx)("li",{className:"ImageGalleryItem",children:Object(i.jsx)("img",{onClick:function(){return t(c,a)},src:n,alt:a,className:"ImageGalleryItem-image"})})}function p(e){var t=e.handleClick;return Object(i.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})}function O(e){var t=e.onClose,n=e.children;Object(a.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.addEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(i.jsx)("div",{className:"Overlay",onClick:t,children:Object(i.jsx)("div",{className:"Modal",children:n})}),document.getElementById("modalRoot"))}var x=new(function(){function e(){Object(j.a)(this,e),this.base_url="https://pixabay.com/api/",this.api_key="21301375-7d22153b76338a293f3dc129f",this._name="",this._page=1}return Object(b.a)(e,[{key:"name",get:function(){return this._name},set:function(e){return this._name=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page=e}},{key:"searchPhotos",value:function(){d.a.defaults.baseURL=this.base_url;var e="?key=".concat(this.api_key,"&q=").concat(this.name,"&page=").concat(this.page,"&per_page=12&image_type=photo&orientation=horizontalv");return console.log(this.page,this.name),d.a.get(e).then((function(e){return e.data})).then((function(e){return e.hits})).catch((function(e){console.log(e)}))}}]),e}());function v(e){var t=e.name,n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],r=c[1],u=Object(a.useState)("init"),h=Object(s.a)(u,2),j=h[0],b=h[1],g=Object(a.useState)(!1),d=Object(s.a)(g,2),v=d[0],S=d[1];Object(a.useEffect)((function(){t&&(b("pending"),x.name=t,x.page=1,x.searchPhotos().then((function(e){if(r(e),b("success"),0===e)return b("error")})).catch((function(e){b("error")})))}),[t]);var y=function(){S(!v)},w=function(e,t){localStorage.setItem("url",JSON.stringify(e)),localStorage.setItem("alt",JSON.stringify(t)),y()};return"init"===j?Object(i.jsx)("h1",{children:"Hello! Search something...."}):"pending"===j?Object(i.jsx)(m.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}):"success"===j?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("ul",{className:"ImageGallery",children:o.length>0&&o.map((function(e){return Object(i.jsx)(f,{getBigPhoto:w,photo:e.webformatURL,photoLage:e.largeImageURL,alt:e.tags},e.id)}))}),Object(i.jsx)(p,{className:"BtnMore",handleClick:function(){x.page+=1,x.searchPhotos().then((function(e){r((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e))})),b("success")})).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){b("error")}))}}),v&&Object(i.jsx)(O,{onClose:y,children:Object(i.jsx)("img",{src:JSON.parse(localStorage.getItem("url")),alt:localStorage.getItem("alt")})})]}):void 0}function S(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(u,{onSubmit:c}),Object(i.jsx)(v,{name:n})]})}r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(S,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.e489975f.chunk.js.map